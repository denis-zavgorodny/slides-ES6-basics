<!DOCTYPE html>
<html lang="en">
<head>
<title>Recap ES5</title>

	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="shower-ribbon/styles/screen-16x10.css">
	<style media="screen">

	</style>
</head>
<body class="shower list">


	<header class="caption">
		<h1>Recap ES5</h1>
	</header>
	<section class="slide">
		<h2 class="shout">Recap ES5</h2>
	</section>

	<section class="slide">
		<h2>ES5</h2>
		<ul>
			<li>вышел в 2009</li>
			<li>поддержка 97,55%</li>
			<li>Strict mode</li>
			<li>native JSON</li>
			<li>Array methods</li>
		</ul>
	</section>

	<section class="slide">
		<h2>Типы данных в ES5</h2>
		<ul>
			<li>string</li>
			<li>number</li>
			<li>boolean</li>
			<li>null</li>
			<li>undefined</li>
			<li>object</li>
		</ul>
	</section>

	<section class="slide">
		<h2>Функции</h2>
		<div>Функции объявления</div>
		<code>function myFunc () {...} <span class="comment">// function declaration</span></code>
		<br /><br />
		<div>Функции выражения</div>
		<code>var myFunc =  function () {...}<span class="comment">// function expression</span></code>
	</section>

	<section class="slide">
		<h2>Функции</h2>
		<pre>
			<code>var myFunc = new Function('a, b', 'console.log(a + b);');</code>
			<code>myFunc('Hello', ' world');</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Функции</h2>
		<pre>
			<code>var myFunc = <mark>new Function</mark>('a, b', 'console.log(a + b);');</code>
			<code>myFunc('Hello', ' world');</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Объекты</h2>
		<ul>
			<li>Литералы объектов</li>
			<li><code>Object.create()</code></li>
			<li>ключевое слово <mark>new</mark></li>
		</ul>
	</section>

	<section class="slide">
		<h2>Литералы объектов</h2>
		<pre>
			<code>var citizen = {};</code>
			<code>citizen.name = 'Bob';</code>
			<code><span class="comment">// или так</span></code>
			<code>var citizen = {</code>
			<code>    name: 'Bob',</code>
			<code>    age: 18</code>
			<code>};</code>
		</pre>
	</section>

	<section class="slide">
		<h2><code>Object.create</code></h2>
		<pre>
			<code>var citizen = Object.create({}, {</code>
			<code>    name: {</code>
			<code>        value: 'Bob',</code>
			<code>        enumerable: true</code>
			<code>    }</code>
			<code>});</code>
		</pre>
    </section>

    <section class="slide">
        <h2><code>Object.defineProperty</code></h2>
        <ul>
            <li><code>writable: false,</code></li>
            <li><code>configurable: false,</code></li>
            <li><code>enumerable: false</code></li>
        </ul>
    </section>

	<section class="slide">
		<h2>Ключевое слово <mark>New</mark></h2>
		<pre>
			<code>function Citizen () { <span class="comment">// Описание конструктора</span></code>
			<code>    <mark>this</mark>.name = 'Bob'</code>
			<code>}</code>
			<code>var citizen = <mark>new</mark> Citizen();<span class="comment">// Создание объекта</span></code>
			<code>console.log(citizen); <span class="comment">// { name: 'Bob' }</span></code>
		</pre>
	</section>

	<section class="slide">
		<h2 class="shout">Прототип</h2>
	</section>

	<section class="slide">
		<h2>Прототип</h2>
		<ul>
			<li>Объекты наследуются от объектов</li>
			<li>Связь хранится в <code>[[prototype]]</code></li>
			<li><code>prototype</code> не <code>[[prototype]]</code></li>
			<li>Объекты можно объединять в цепочки через прототипы</li>
		</ul>
	</section>

	<section class="slide">
		<div>
			<table>
				<tr>
					<td>
						<h2>Object Человек</h2>
						<ul>
							<li>голова: 1</li>
							<li>шея: 1</li>
							<li>туловище: 1</li>
							<li>рука: 2</li>
							<li>нога: 2</li>
						</ul>
					</td>
					<td>&nbsp;</td>
				</tr>
			</table>
		</div>
	</section>

	<section class="slide">
		<div>
			<table>
				<tr>
					<td>
						<h2>Object Человек</h2>
						<ul>
							<li>голова: 1</li>
							<li>шея: 1</li>
							<li>туловище: 1</li>
							<li>рука: 2</li>
							<li>нога: 2</li>
						</ul>
					</td>
					<td>
						<h2>Object Bob</h2>
						<ul>
							<li>пол: мужской</li>
							<li>имя: Bob</li>
							<li>[[Prototype]]: Object Человек</li>
						</ul>
					</td>
				</tr>
			</table>
		</div>
	</section>

	<section class="slide">
		<div>
			<center style="margin: -5% 0 0 0;">
				<h2>Bob</h2>
				<img src="pictures/man.jpg?v:1" width="374" height="461">
			</center>
		</div>
	</section>

	<section class="slide">
		<div>
			<table>
				<tr>
					<td>
						<h2>Object Человек</h2>
						<ul>
							<li style="color: #b3b3b3;">голова: 1</li>
							<li style="color: #b3b3b3;">шея: 1</li>
							<li style="color: #b3b3b3;">туловище: 1</li>
							<li>рука: 3</li>
							<li style="color: #b3b3b3;">нога: 2</li>
						</ul>
					</td>
					<td>
						&nbsp;
					</td>
				</tr>
			</table>
		</div>
	</section>

	<section class="slide">
		<div>
			<center style="margin: -5% 0 0 0;">
				<h2>Bob</h2>
				<img src="pictures/man2.jpg?v:1" width="374" height="461">
			</center>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Bob</h2>
			<pre>
	            <code>var bob = {</code>
	            <code>    gender: 'man',</code>
	            <code>    name: 'Bob',</code>
	            <code>    __proto__: human,</code>
	            <code>}</code>
	        </pre>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Человек</h2>
			<pre>
	            <code>var human = {</code>
	            <code>    head: 1,</code>
	            <code>    neck: 1,</code>
	            <code>    body: 1,</code>
	            <code>    arm: 3,</code>
	            <code>    leg: 2,</code>
	            <code>}</code>
	        </pre>
		</div>
	</section>

	<section class="slide">
		<h2 class="shout">Prototype Lookup</h2>
	</section>

	<section class="slide">
		<h2>Prototype Lookup</h2>
		<center><img height="400" src="pictures/property-lookup.png" alt=""></center>
	</section>

	<section class="slide">
		<pre>
			<code>console.log(bob.arm); <span class="comment">// 3</span></code>
			<code>human.leg = 4;</code>
			<code>console.log(bob.leg); <span class="comment">// 4</span></code>
			<code>bob.arm = 2;</code>
			<code>bob.leg = 2;</code>
			<code>console.log(bob.arm); <span class="comment">// 2</span></code>
			<code>console.log(bob.leg); <span class="comment">// 2</span></code>
			<code>human.leg = 5;</code>
			<code>console.log(bob.leg); <span class="comment">// 2</span></code>
		</pre>
	</section>

	<section class="slide">
		<pre>
			<code><span class="comment">//Как назначить прототип?</span></code>
			<code>bob.<mark>__proto__</mark> = human;</code>
			<code>human.isPrototypeOf(bob); <span class="comment">//true</span></code>
			<code>console.log(bob.age); <span class="comment">//undefined</span></code>
			<code>human.age = 3.2e9;</code>
			<code>console.log(bob.age); <span class="comment">//3200000000</span></code>
		</pre>
		<center>
        <h2 class="next" style="color: red;"><mark>__proto__</mark> в ES5 было опасным</h2>

		</center>
	</section>

	<section class="slide">
		<h2>Прототип в ES5</h2>
		<br />
		<ul>
			<li>Используем <code>Object.create(proto[, propertiesObject])</code></li>
			<br />
			<li>Расширяем <code>.prototype</code> конструктора</li>
		</ul>
	</section>

	<section class="slide">
		<h2>Методы чтения/записи</h2>
		<div>В литерале объекта</div>
		<pre>
			<code>var man = {</code>
			<code>    name: 'Bob',</code>
			<code>    <mark>get</mark> age() {return this._age + 'y.o.';},</code>
			<code>    <mark>set</mark> age(value) { this._age = value;}</code>
			<code>    man.age = 70;</code>
			<code>    console.log(man.age);<span class="comment">//70 y.o.</span></code>
			<code>};</code>
		</pre>
	</section>


	<section class="slide">
		<h2>Strict mode</h2>
		<code>"use strict";</code> или <code>'use strict';</code>
		<div><strong>Область объявления:</strong></div>
		<ol>
			<li>весь файл, тег <code>&lt;script&gt;</code></li>
			<li>функция</li>
		</ol>
	</section>

	<section class="slide">
		<h2>Strict mode</h2>
		<pre class="small">
			<code>"use strict"; <span class="comment">// Обязательно в самом верху</span></code>
			<code>var a;</code>
			<code>a = 1;</code>
			<code>b = 1;<span class="comment">// ReferenceError!</span></code>
		</pre>
	</section>

	<section class="slide">
		<h2>Strict mode</h2>
		<ul>
			<li>не допускается <code>with</code></li>
			<li>необходимо объявлять переменные</li>
			<li>при простом вызове функции в <code>this</code> <code>undefined</code></li>
			<li>...</li>
		</ul>
	</section>

	<section class="slide">
		<h2 class="shout">ES6 Basics</h2>
	</section>

	<section class="slide">
		<h2>Объявления на уровне блоков</h2>
		<div>блочная область видимости</div>
		<pre>
			<code>{</code>
			<code>    let a = 1;</code>
			<code>    console.log(a); <span class="comment">//1</span></code>
			<code>}</code>
			<code>console.log(a); <span class="comment">//ReferenceError</span></code>
		</pre>
	</section>

	<section class="slide">
		<h2>Константы</h2>
		<pre>
			<code>const a <mark>=</mark> 1;</code>
			<code>a <mark>=</mark> 2; <span class="comment">//TypeError</span></code>
			<code>const b <mark>=</mark> {name: 'Bob'};</code>
			<code>b.name <mark>=</mark> 'Piter';</code>
			<code>console.log(b.name); <span class="comment">// Piter</span></code>
		</pre>
	</section>

	<section class="slide">
		<h2>Временная мертвая зона</h2>
		<pre>
				<code>{</code>
				<code>    console.log(a); <span class="comment">undefined</span></code>
				<code>    console.log(b); <span class="comment">ReferenceError</span></code>
				<code>    var a;</code>
				<code>    let b;</code>
				<code>}</code>
			</pre>
	</section>

	<section class="slide">
		<h2>Область видимости объявления функций</h2>
		<ul>
			<li>область видимости стала блочной в <code>strict mode</code></li>
			<li>объявления функций все еще поднимаются в верх области видимости</li>
		</ul>
		<pre>
			<code>if(condition) {</code>
			<code>    function foo() {...}</code>
			<code>} else {</code>
			<code>    function foo() {...}</code>
			<code>}</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Параметры по умолчанию</h2>
		<pre>
			<code>function getGreetUser(<mark>name = 'user', suffix = 'Hello, '</mark>) {</code>
			<code>    return suffix + name;</code>
			<code>}</code>
			<code>getGreetUser('Bob'); <span class="comment">//Hello, Bob</span></code>
		</pre>
	</section>

	<section class="slide">
		<h2>Стрелочные функции</h2>
		<pre>
			<code><span class="comment">// функциональные выражения</span></code>
			<code>var foo = (x, y) => x + y;</code>
			<code>var bar = (x, y) => {</code>
			<code>    return x + y;</code>
			<code>}</code>
			<code>var baz = x => x * 2;</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Стрелочные функции</h2>
		<ul>
			<li>новый синтаксис</li>
			<li>всегда функциональные выражения</li>
			<li>лексический контекст <mark>this</mark></li>
		</ul>
	</section>

	<section class="slide">
		<h2>Контекст стрелочных функций</h2>
		<pre>
			<code>var controller = {</code>
			<code>    do: function(...) {</code>
			<code>        btn.addEventListener('click', function(){</code>
			<code>            console.log(<mark>this</mark>); <span class="comment">//this -> btn</span></code>
			<code>        });</code>
			<code>    }</code>
			<code>};</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Контекст стрелочных функций</h2>
		<pre>
			<code>var controller = {</code>
			<code>    do: function(...) {</code>
			<code>        btn.addEventListener('click', () => {</code>
			<code>            console.log(<mark>this</mark>); <span class="comment">//this -> Controller</span></code>
			<code>        });</code>
			<code>    }</code>
			<code>};</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Spread <code>...</code> Rest</h2>
		<blockquote>Когда оператор <code>...</code> стоит перед массивом (или любым другим набором
			доступных для перебора значений) он разделяет массив на отдельные значения</blockquote>
		<pre>
			<code>function foo(a, b, c) {</code>
			<code>    return a + b + c;</code>
			<code>}</code>
			<code>foo(...[1, 2, 3]); <span class="comment">// 6</span></code>
		</pre>
	</section>

	<section class="slide">
		<h2>Spread
			<code>...</code> Rest</h2>
		<blockquote>Когда оператор
			<code>...</code> принимает множественные значения, например, в определении функции,
			то он собирает аргументы в один массив</blockquote>
		<pre>
				<code>function foo(...a) {</code>
				<code>    return a;</code>
				<code>}</code>
				<code>foo(1, 2, 3); <span class="comment">// Array [1, 2, 3]</span></code>
			</pre>
	</section>

	<section class="slide">
		<h2>Деструктурирующее присваивание</h2>
		<pre>
			<code>var [a, b, c] = [10, 2, 33];</code>
			<code>console.log(a, b, c); <span class="comment">//10, 2, 33</span></code>
			<code>// А если с объектами</code>
			<code>var {name, age} = {name: 'Bob', age: 22};</code>
			<code>var {<mark>что: куда</mark>} = {name: 'Bob', age: 22};</code>
			<code>var {name:a, age} = {name: 'Bob', age: 22}</code>
			<code>console.log(a); <span class="comment">// Bob</span></code>
		</pre>
    </section>

    <section class="slide">
        <h2>Деструктурирующее присваивание</h2>
        <pre>
            <code><span class="comment">// Значение по умолчанию</span></code>
            <code>var {name, gender} = {name: 'Bob', age: 22};</code>
            <code>console.log(gender); <span class="comment">//undefined</span></code>
            <code>var {name, gender='male'} = {name: 'Bob', age: 22};</code>
            <code>console.log(gender); <span class="comment">//male</span></code>
        </pre>
    </section>

	<section class="slide">
		<h2>Глубже</h2>
		<pre>
			<code>var {parent: {dad: {name: name, age: age}}} = {</code>
			<code>    parent: {</code>
			<code>        dad: {</code>
			<code>            name: 'Bill', age: 70</code>
			<code>        }</code>
			<code>    }</code>
			<code>}</code>
			<code>console.log(name, age) <span class="comment">// Bill 70</span></code>
		</pre>
	</section>

	<section class="slide">
		<h2>Расширения объектных литералов</h2>
		<ul>
			<li>краткие свойства</li>
			<li>краткие методы</li>
			<li>вычисляемые свойства</li>
		</ul>
	</section>

	<section class="slide">
		<h2>Краткие свойства</h2>
		<pre>
			<code>var name = 'Bob';</code>
			<code>var foo = {</code>
			<code>    name: name</code>
			<code>};</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Краткие свойства</h2>
		<pre>
			<code>var name = 'Bob';</code>
			<code>var foo = {</code>
			<code>    name</code>
			<code>};</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Краткие методы</h2>
		<pre>
			<code>var foo = {</code>
			<code>    baz: function() {</code>
			<code>        //...</code>
			<code>    }</code>
			<code>};</code>
			<code>foo.baz();</code>
		</pre>
	</section>

	<section class="slide">
		<h2>Краткие методы</h2>
		<pre>
				<code>var foo = {</code>
				<code>    baz() {</code>
				<code>        //...</code>
				<code>    }</code>
				<code>};</code>
				<code>foo.baz();</code>
			</pre>
	</section>

	<section class="slide">
		<h2>Ключевое слово <code>super</code></h2>
		<pre>
			<code>var bar = { a: 1};</code>
			<code>var foo = { </code>
			<code>    baz() {</code>
			<code>        console.log(super.a);</code>
			<code>    },</code>
			<code>    __proto__: bar</code>
			<code>};</code>
			<code>foo.baz(); <span class="comment">// 1</span></code>
		</pre>
    </section>

    <section class="slide">
        <h2>Ключевое слово
            <code>super</code>
        </h2>
        <pre>
            <code>var bar = { a: 1};</code>
            <code>var foo = { </code>
            <code>    a: 2,</code>
            <code>    baz() {</code>
            <code>        console.log(super.a); <span class="comment">// 1</span></code>
            <code>    },</code>
            <code>    __proto__: bar</code>
            <code>};</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Вычисляемые свойства</h2>
        <div>В ES5 была возможность получить доступ к вычисляемому имени свойства объекта</div>
        <pre>
            <code>var person = {};</code>
            <code>var field = 'name';</code>
            <code>person[field] = 'Bob'; <span class="comment">// Bob</span></code>
        </pre>
    </section>

    <section class="slide">
        <h2>Вычисляемые свойства</h2>
        <div>В ES6 можно делать это внутри литерала</div>
        <pre>
            <code>var field = 'name';</code>
            <code>var person = {</code>
                <code> [field]: 'Bob'</code>
            <code>} <span class="comment">//{ name: 'Bob' }</span></code>
        </pre>
    </section>

    <section class="slide">
        <h2>Шаблонные строки</h2>
        <div>Интерполированные строковые литералы</div>
        <ul>
            <li>могут содержать внутри себя переменные и выражения</li>
            <li>допускают переносы строк</li>
            <li>переменные и выражения внутри литерала анализируются и вычисляются</li>
            <li>напоминает самовызывающуюся функцию<br />(Immediately Invoked Function Expression)</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Шаблонные строки</h2>
        <pre>
            <code>var str = `Это длинная строка</code>
            <code>    которую можно перенести на другую</code>
            <code>    строку`;</code>
            <code>var name = 'Bob';</code>
            <code>var greet = `Hello, ${name}`; <span class="comment">// Hello, Bob</span></code>
        </pre>
    </section>

    <section class="slide">
        <h2>Интерполированные выражения</h2>
        <pre>
            <code>function upper(str) {</code>
            <code>    return str.toUpperCase();</code>
            <code>}</code>
            <code>var name = "Bob";</code>
            <code>var greet = `Hello, ${upper( `${name}` )}`; <span class="comment">// Hello, BOB</span></code>
        </pre>
    </section>

    <section class="slide">
        <h2>Тегированные шаблонные строки</h2>
        <pre>
            <code>function tag(str, ...param) {</code>
            <code>    // ...</code>
            <code>}</code>
            <code>tag `Hello, ${name}`;</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Тегированные шаблонные строки</h2>
        <pre>
            <code>var name = 'Bob';</code>
            <code>var mr = 'mr.';</code>
            <code>function <mark>tag</mark>(str, ...param) {</code>
            <code>    return str.reduce((prev, current, index) => {</code>
            <code>        return prev + param[index - 1] + current;</code>
            <code>    });</code>
            <code>}</code>
            <code>var res = <mark>tag</mark> `Hello, ${mr} ${name}`;</code>
        </pre>
    </section>

    <section class="slide">
        <h2 class="shout">Спасибо!</h2>
    </section>

    <section class="slide">
        <h2>Домашнее задание</h2>
        <div>Дано</div>
        <pre>
            <code>function Cart() {};</code>
            <code>Cart.prototype.add = function (item) {</code>
            <code>    if (!this.goods) {</code>
            <code>        this.goods = [];</code>
            <code>    }</code>
            <code>    this.goods.push(item);</code>
            <code>};</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Домашнее задание</h2>
        <div>Реализовать <a href="https://denis-zavgorodny.github.io/slides-ES6-basics/homework.js?v:2">функционал корзины</a> <code>UserCart</code> с возможностью</div>
        <ul>
            <li>добавлять товар в корзину</li>
            <li>удалять товар из корзины</li>
            <li>получить товары корзины</li>
            <li>изменять количество товара в корзине</li>
            <li>очищать корзину</li>
            <li>получать суммарную стоимость корзины</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Самостоятельное изучение</h2>
        <ul>
            <li><a href="https://goo.gl/ndp8MD">Методы работы с массивами</a></li>
            <li>Замыкания, области видимости, IIFE
                <a href="https://learn.javascript.ru/closures">Ссылка 1</a>
                <a href="https://codeburst.io/javascript-what-the-heck-is-an-immediately-invoked-function-expression-a0ed32b66c18">Ссылка 1</a>
            </li>
            <li>
                <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Statements/for...of">Циклы for..of</a>
            </li>
            <li>Стрелочные функции
                (<a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Functions/Arrow_functions">Arrow functions</a>)
            </li>
            <li>Деструктуризация
                <a href="https://understandinges6.denysdovhan.com/manuscript/05-Destructuring.html">Ссылка 1</a>
                <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">Ссылка 2</a>
            </li>
            <li>Дескрипторы
                <a href="https://learn.javascript.ru/descriptors-getters-setters">Ссылка 1</a>
                <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Object">Ссылка 2</a>
                <a href="http://getinstance.info/articles/javascript/attributes-of-object-properties-in-javascript/">Ссылка 3</a>
            </li>
            <li><a href="https://understandinges6.denysdovhan.com/manuscript/04-Objects.html">Новые методы работы с объектами</a></li>
            <li>Наследование и цепочки прототипов
                <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">Ссылка 1</a>
                <a href="https://learn.javascript.ru/prototype">Ссылка 2</a>
            </li>
        </ul>
    </section>

    <section class="slide">
        <h2>Спасибо!</h2>
        <table class="simple-table">
            <tr>
                <td>
                    <p>
                        <strong>Denis Zavgorodny</strong>
                        <br /> web technologist, founder of @ChernivtsiJS,
                        <br />mentor at @NodeSchool Chernivtsi, expert at @Nenology
                    </p>
                    <p>
                        <a href="https://twitter.com/DenisZavgorodny">@DenisZavgorodny</a>
                    </p>
                    <p>
                        <a href="mailto:denis.zavgorodny@gmail.com">denis.zavgorodny@gmail.com</a>
                    </p>
                </td>
            </tr>
        </table>
    </section>


	<div class="progress"></div>

	<script src="shower-core/shower.min.js"></script>
	<!-- Copyright © 2017 Yours Truly, Famous Inc. -->

</body>
</html>
